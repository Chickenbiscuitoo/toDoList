(()=>{class t{constructor(t,e,n){this.title=t,this.dueDate=e,this.projectName=n}}class e{static displayProjectPage(t){const e=document.getElementById("main-content");e.innerHTML="";const n=document.createElement("div");n.id="project-name",n.innerText=`${t}`;const s=document.createElement("div");s.id="task-list";const a=document.createElement("button");a.id="btn-addtask",a.className="btn-basic",a.innerText="+ Add task";const i=document.createElement("div");i.className="popup-hidden",i.innerHTML='\n            <div class="div-inputs"> \n                <input type="text" id="input-title" placeholder="Task Name">\n                <input type="text" id="input-duedate" placeholder="Due Date">\n            </div>\n            <div class="div-submit-btn">\n                <button id="btn-submit-form" class="btn-submit">Submit</button>\n            </div>\n        ',e.appendChild(n),e.appendChild(s),e.appendChild(a),e.appendChild(i)}static displayProjects(){n.getProjects().forEach((t=>{e.addProjectToList(t)}))}static displayTasks(t){n.getTasks().forEach((n=>{n.projectName==t&&e.addTaskToList(n)}))}static addTaskToList(t){const e=document.getElementById("task-list"),n=document.createElement("div");n.classList="task";const s=document.createElement("div");s.classList="task-summary";const a=document.createElement("input");a.setAttribute("type","checkbox"),a.setAttribute("name",`${t.title}`),a.classList="task-checkbox";const i=document.createElement("label");i.setAttribute("for",`${t.title}`);const c=document.createElement("div");c.classList="task-date";const d=document.createElement("button");d.classList="btn-delete-task",e.appendChild(n),n.appendChild(s),s.appendChild(a),s.appendChild(i),s.appendChild(c),s.appendChild(d),i.innerHTML=`<p>${t.title}</p>`,c.innerHTML=`<p>${t.dueDate}</p>`,d.innerText="✖"}static addProjectToList(t){const e=document.getElementById("menu-projects"),n=document.createElement("div"),s=document.createElement("button");n.innerHTML=`<button class="btn-projects btn-basic">${t}</button>`,n.classList="div-project",s.classList="btn-del-project",s.innerText="✖",e.appendChild(n),n.appendChild(s)}static deleteTask(t){t.classList.contains("btn-delete-task")&&t.parentElement.parentElement.remove()}static deleteProject(t){t.classList.contains("btn-del-project")&&t.parentElement.remove()}static doPopup(t){t.classList.contains("popup-hidden")?t.classList.replace("popup-hidden","popup-visible"):t.classList.contains("popup-visible")&&t.classList.replace("popup-visible","popup-hidden")}static doClearForm(){document.getElementById("input-projectname").value="",null===!document.getElementById("input-title").value&&null===!document.getElementById("input-duedate").value&&(document.getElementById("input-title").value="",document.getElementById("input-duedate").value="")}}class n{static getTasks(){let t;return t=null===localStorage.getItem("tasks")?[]:JSON.parse(localStorage.getItem("tasks")),t}static addTask(t){const e=n.getTasks();e.push(t),localStorage.setItem("tasks",JSON.stringify(e))}static removeTask(t){const e=n.getTasks();e.forEach(((n,s)=>{n.title===t&&e.splice(s,1)})),localStorage.setItem("tasks",JSON.stringify(e))}static getProjects(){let t;return t=null===localStorage.getItem("projects")?[]:JSON.parse(localStorage.getItem("projects")),t}static addProject(t){const e=n.getProjects();e.push(t),localStorage.setItem("projects",JSON.stringify(e))}static removeProject(t){const e=n.getProjects(),s=n.getTasks();e.forEach(((n,s)=>{n===t&&e.splice(s,1)})),s.forEach((e=>{e.projectName===t&&n.removeTask(e.title)})),localStorage.setItem("projects",JSON.stringify(e))}}e.displayProjects(),document.getElementById("btn-addproject").addEventListener("click",(t=>{e.doPopup(t.target.parentElement.nextElementSibling)})),document.getElementById("btn-submit-project").addEventListener("click",(t=>{if(""==!document.getElementById("input-projectname").value){let s=document.getElementById("input-projectname").value;e.addProjectToList(s),n.addProject(s),e.doPopup(t.target.parentElement.parentElement),e.doClearForm()}})),document.getElementById("menu-projects").addEventListener("click",(t=>{t.target.classList.contains("btn-projects")?(e.displayProjectPage(t.target.innerText),e.displayTasks(t.target.innerText)):t.target.classList.contains("btn-del-project")&&(n.removeProject(t.target.previousElementSibling.innerText),e.deleteProject(t.target))}));const s=document.getElementById("main-content");s.addEventListener("click",(a=>{if("btn-addtask"===a.target.id)e.doPopup(a.target.nextElementSibling);else if("btn-submit-form"===a.target.id){if(""==!document.getElementById("input-title").value&&""==!document.getElementById("input-duedate").value){let i=document.getElementById("input-title").value,c=document.getElementById("input-duedate").value;const d=new t(i,c,s.firstElementChild.textContent);e.addTaskToList(d),n.addTask(d),e.doClearForm(),e.doPopup(a.target)}}else a.target.classList.contains("btn-delete-task")&&(e.deleteTask(a.target),n.removeTask(a.target.previousElementSibling.previousElementSibling.textContent))}))})();